/*! For license information please see 12.bundle.88a1c90be71458b123a9.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{128:function(e,t,i){"use strict";function a(e){return!!(e.conditionField&&e.conditionValue&&"function"==typeof e.conditionField.forEach&&"function"==typeof e.conditionValue.forEach&&e.conditionField.length>0&&e.conditionField.length===e.conditionValue.length)}function n(e,t){var i=!0;return e.conditionField.forEach((function(a,n){void 0===t[a]?i=!1:null===t[a]||t[a].value||String(t[a])===String(e.conditionValue[n])?(t[a]&&t[a].value&&String(t[a].value)!==String(e.conditionValue[n])||null===t[a]&&null!==e.conditionValue[n])&&(i=!1):i=!1}),this),i}Object.defineProperty(t,"__esModule",{value:!0}),t.hasConditions=a,t.checkConditions=n,t.default=function(e,t){return!a(e)||n(e,t)}},671:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=C(i(458)),n=C(i(459)),r=C(i(53)),o=C(i(45)),l=C(i(46)),s=C(i(47)),p=C(i(48)),d=C(i(49)),u=i(17),f=C(u),h=C(i(461));i(462);var c=C(i(250)),m=C(i(463)),g=C(i(128));function C(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,l.default)(this,t);var i=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return i.onSelectFile=function(e){if(e.target.files&&e.target.files.length>0)if(i.checkFileSize(e.target.files[0]))if(i.allowedFileTypes.includes(e.target.files[0].type)){var t=e.target.files[0].name,a=e.target.files[0].type;(0,m.default)(e.target.files[0],(function(e){var n=e.toDataURL(a);i.setState({src:n,imageName:t})}),{orientation:!0,canvas:!0})}else c.default.fire({icon:"error",title:i.props.field.titleFileTooBig,text:i.props.field.textFileTooBig}),e.target.value="";else c.default.fire({icon:"error",title:i.props.field.titleFileTooBig,text:i.props.field.textFileTooBig}),e.target.value=""},i.onImageLoaded=function(e){i.imageRef=e;var t=JSON.parse((0,r.default)(i.state.crop));if(i.props.data[i.props.field.name]){var a=i.props.data[i.props.field.name].importantPart;return t.x=a.x*i.imageRef.width,t.y=a.y*i.imageRef.height,t.width=a.width*i.imageRef.width,t.height=a.height*i.imageRef.height,t.unit="px",i.setState({crop:t},(function(){return i.onCropComplete(t)})),!1}},i.onCropChange=function(e,t){i.setState({crop:t})},i.getCroppedImg=i.getCroppedImg.bind(i),i.onSelectFile=i.onSelectFile.bind(i),i.onImageLoaded=i.onImageLoaded.bind(i),i.onCropComplete=i.onCropComplete.bind(i),i.makeClientCrop=i.makeClientCrop.bind(i),i.onCropChange=i.onCropChange.bind(i),i.unsetImage=i.unsetImage.bind(i),i.state={src:null,imageName:"",crop:{unit:"%",width:90,height:90,x:5,y:5},croppedImageUrl:null},i.props.data[i.props.field.name]&&(i.state.src=i.props.data[i.props.field.name].path,i.state.imageName=i.props.data[i.props.field.name].name),i.allowedFileTypes=["image/png","image/jpeg","image/jpg"],i.inputRef=null,i}var i,u;return(0,d.default)(t,e),(0,s.default)(t,[{key:"onCropComplete",value:(u=(0,n.default)(a.default.mark((function e(t){var i,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeClientCrop(t);case 2:i={imageData:this.state.src,importantPart:{x:t.x/this.imageRef.width,y:t.y/this.imageRef.height,width:t.width/this.imageRef.width,height:t.height/this.imageRef.height},imageName:this.state.imageName},(n=this.props.data)[this.props.field.name]=i,this.props.form.props.updateFunction(this.props.form.props.name,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"makeClientCrop",value:(i=(0,n.default)(a.default.mark((function e(t){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 3:i=e.sent,this.setState({croppedImageUrl:i});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getCroppedImg",value:function(e,t,i){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;return a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height),a.toDataURL("image/jpeg")}},{key:"checkFileSize",value:function(e){var t=e.size,i=void 0;return!(t>1e3&&(i=t/1e3)>1e3&&i/1e3>6)}},{key:"render",value:function(){var e=this;if(!(0,g.default)(this.props.field,this.props.data))return null;var t=null;this.props.field.label&&(t=this.props.field.required?f.default.createElement("label",{className:"label-file c4g-required"},this.props.field.label):f.default.createElement("label",{className:"label-file"},this.props.field.label));var i=this.state,a=i.crop,n=i.croppedImageUrl,r=i.src,o=this.props.field.name,l=null;return this.props.field.description&&(l=f.default.createElement("small",{className:"field-description form-text text-muted"},this.props.field.description)),f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"form-group"},t,f.default.createElement("input",{type:"file",accept:".jpg, .png, .jpeg",onChange:this.onSelectFile,id:o,ref:function(t){e.inputRef=t},name:o+(this.props.field.max>1?"[]":""),className:"form-control-file"}),l),r&&f.default.createElement(h.default,{src:r,crop:a,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),n&&f.default.createElement("img",{alt:"Crop",style:{maxWidth:"100%"},src:n}),r&&f.default.createElement("button",{onClick:this.unsetImage,title:this.props.languageRefs.CLICK_TO_REMOVE_IMAGE,className:"btn btn-primary remove-image "+this.props.field.name},this.props.languageRefs.REMOVE_IMAGE))}},{key:"unsetImage",value:function(){var e=this.props.data;e[this.props.field.name]=null,this.setState({src:null,imageName:null,crop:null,croppedImageUrl:null}),null!==this.inputRef&&(this.inputRef.value=""),this.props.form.props.updateFunction(this.props.form.props.name,e)}}]),t}(u.Component);t.default=v}}]);