/*! For license information please see 36.bundle.c0f6cdfaac53fb0ab3d9.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{105:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(52)),o=h(a(30)),s=h(a(45)),i=h(a(46)),r=h(a(47)),l=h(a(48)),c=h(a(49)),p=a(17),d=h(p),m=a(720);function h(e){return e&&e.__esModule?e:{default:e}}var u=d.default.lazy((function(){return a.e(88).then(a.t.bind(null,1297,7))})),f=d.default.lazy((function(){return a.e(15).then(a.t.bind(null,802,7))})),g=d.default.lazy((function(){return a.e(115).then(a.bind(null,1298))})),v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={asyncLoading:""!==e.component.asyncUrl,filterWasReset:!1},a.asyncUrl=a.props.component.asyncUrl,a.positionActive=!1,a.position=[],a.checkPosition(),a.positionActive&&a.addDistances(e.data),a.fetchMoreData=a.fetchMoreData.bind(a),a}return(0,c.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=null;if(this.props.component.headline&&this.props.component.headlineLevel)switch(this.props.component.headlineLevel){case 1:t=d.default.createElement("h1",{className:"c4g-tile-headline"},this.props.component.headline);break;case 2:t=d.default.createElement("h2",{className:"c4g-tile-headline"},this.props.component.headline);break;case 3:t=d.default.createElement("h3",{className:"c4g-tile-headline"},this.props.component.headline);break;case 4:t=d.default.createElement("h4",{className:"c4g-tile-headline"},this.props.component.headline);break;case 5:t=d.default.createElement("h5",{className:"c4g-tile-headline"},this.props.component.headline);break;case 6:t=d.default.createElement("h6",{className:"c4g-tile-headline"},this.props.component.headline)}if(0===this.props.data.length)return!this.props.updated&&this.props.textBeforeUpdate?d.default.createElement("div",{className:"container"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-md-12"},d.default.createElement("div",{className:"alert alert-dark",role:"alert"},this.props.textBeforeUpdate)))):this.props.updated&&this.props.textAfterUpdate?d.default.createElement("div",{className:"container"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-md-12"},d.default.createElement("div",{className:"alert alert-dark",role:"alert"},this.props.textAfterUpdate)))):null;var a=this.props.component.className;this.props.filterChanged&&this.props.component.classAfterFilter&&(a=this.props.component.classAfterFilter),this.state.filterWasReset&&(a=this.props.component.className);var n={dataLength:this.props.data.length,next:this.fetchMoreData,hasMore:this.state.asyncLoading,loader:d.default.createElement("div",{className:"preloader-image-wrapper",style:{textAlign:"center",margin:"auto"}},this.props.component.loadingText||d.default.createElement("img",{src:"bundles/con4gisframework/img/preloader-image.svg",className:"preloader-image",alt:""})),className:a,scrollThreshold:this.props.component.scrollThreshold};if("carousel"===this.props.component.layoutType)return d.default.createElement(p.Suspense,{fallback:d.default.createElement("div",{style:{textAlign:"center",margin:"auto"}},d.default.createElement("img",{src:"bundles/con4gisframework/img/preloader-image.svg",className:"preloader-image",alt:""}))},d.default.createElement(g,n,d.default.createElement("div",{className:"container c4g-container"},d.default.createElement("div",{className:"slider explorer owl-wrapper c4g-carousel-wrapper"},d.default.createElement("div",{className:"owl-carousel owl-theme c4g-carousel-theme"},this.props.data.map((function(t,a){var n=e.props.component.tileClass;return e.props.component.conditionalTileClassName&&e.props.component.conditionalTileClassField&&void 0!==t[e.props.component.conditionalTileClassField]&&t[e.props.component.conditionalTileClassField]===e.props.component.conditionalTileClassValue&&(n+=" "+e.props.component.conditionalTileClassName),d.default.createElement(u,{className:n,dataEntry:t,key:a,fields:e.props.fields,conditionalClasses:e.props.component.conditionalClasses})})))))));var o=d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:"c4g-tile-headline-wrapper"},t),d.default.createElement(p.Suspense,{fallback:d.default.createElement("div",{style:{textAlign:"center",margin:"auto"}},d.default.createElement("img",{src:"bundles/con4gisframework/img/preloader-image.svg",className:"preloader-image",alt:""}))},d.default.createElement(g,n,d.default.createElement("div",{className:"c4g-list-elements"},this.props.data.map((function(t,a){var n=e.props.component.tileClass;return e.props.component.conditionalTileClassName&&e.props.component.conditionalTileClassField&&void 0!==t[e.props.component.conditionalTileClassField]&&t[e.props.component.conditionalTileClassField]===e.props.component.conditionalTileClassValue&&(n+=" "+e.props.component.conditionalTileClassName),d.default.createElement(f,{className:n,dataEntry:t,key:a,fields:e.props.fields,conditionalClasses:e.props.component.conditionalClasses,list:e})}))))));return this.props.component.listWrapper?d.default.createElement("div",{id:this.props.component.wrapperId,className:this.props.component.wrapperClass},o):o}},{key:"componentDidUpdate",value:function(e,t,a){var s=!1,i=this.props.component.filterData,r=e.component.filterData,l=this.checkIfFilterWasReset(r,i);void 0===r&&void 0!==i?s=!0:"object"===(void 0===i?"undefined":(0,o.default)(i))&&null!==i?(0,n.default)(i).forEach((function(e,t){if(!1===s&&void 0!==e&&i[e]!==r[e])if(Array.isArray(i[e])&&0===i[e].length&&Array.isArray(r[e])&&0===r[e].length);else if(Array.isArray(i[e])&&Array.isArray(r[e]))if(i[e].length===r[e].length){for(var a=0;a<i[e].length;a++)if(i[e][a]!==r[e][a]){s=!0;break}}else s=!0;else s=!0}),this):"object"===(void 0===r?"undefined":(0,o.default)(r))&&null!==r&&(0,n.default)(r).forEach((function(e,t){!1===s&&void 0!==e&&i[e]!==r[e]&&(s=!0)}),this),this.props.component.checkAsyncWhileUpdate&&void 0!==this.props.component.asyncLoading&&null!==this.props.component.asyncLoading&&this.props.component.asyncLoading!==this.state.asyncLoading&&this.setState({asyncLoading:this.props.component.asyncLoading,filterWasReset:l}),!0===s&&!0===this.state.asyncLoading&&this.fetchMoreData()}},{key:"checkIfFilterWasReset",value:function(e,t){if(e&&!t)return!0;if(!e)return!1;var a=["moduleId","randKey"],n=!1;for(var o in e)e.hasOwnProperty(o)&&(Array.isArray(e[o])?e[o].length>0&&(n=!0):e[o]&&(n=!0));var s={},i=!0;for(var r in t)if(t.hasOwnProperty(r)){if("sorting"===r&&"random"===t[r])continue;if(a.includes(r))continue;Array.isArray(t[r])?s[r]=0===t[r].length:s[r]=!t[r]}for(var l in s)if(s.hasOwnProperty(l)&&!s[l]){i=!1;break}return i&&n}},{key:"checkPosition",value:function(){var e=this.props.fields,t=!1;for(var a in e)if(e.hasOwnProperty(a)&&"distance"===e[a].type){t=!0,this.geoxFieldname=e[a].geox,this.geoyFieldname=e[a].geoy,this.distanceFieldname=e[a].name;break}this.positionActive=(0,m.geolocationActive)()&&t}},{key:"fetchMoreData",value:function(){var e=this;if(!this.props.component.onlySearchWithParam||""!==this.props.component.filterData[this.props.component.onlySearchWithParam]){this.setState({asyncLoading:!1});var t=this.asyncUrl.replace("{offset}",this.props.data.length);if(t=new URL(t,window.location.protocol+window.location.hostname),void 0!==this.props.component.filterData&&0!==(0,n.default)(this.props.component.filterData).length)if(this.positionActive&&"distance"===this.props.component.filterData.sorting){var a=this.props.component.filterData;this.position&&(a.pos=this.position),t.search=new URLSearchParams(a).toString()}else t.search=new URLSearchParams(this.props.component.filterData).toString();fetch(t.href).then((function(e){return e.json()})).then((function(t){if(0===t.length)e.props.component.asyncLoading=!1,e.setState({asyncLoading:!1}),e.props.setFunction(e.props.name,e.props.component.data,e.props.component.filterData);else{e.props.component.uniqueField&&(t=e.removeDuplicates(e.props.component.data,t));var a=e.props.data.concat(t);if(!e.state.asyncLoading){var n=parseInt(e.props.component.maxData,10),o=parseInt(e.props.component.loadStep,10),s=!1,i=n>0&&a.length===n,r=o===t.length;i?s=!1:r&&(s=!0),e.setState({asyncLoading:s})}e.props.updateFunction(e.props.name,a)}}))}}},{key:"addDistances",value:function(e){var t=this;(0,m.getGeolocation)((function(a){t.position=[a.coords.longitude,a.coords.latitude],e.forEach((function(e,a){e[t.distanceFieldname]=(0,m.formatDistance)((0,m.calculateDistance)(t.position,[e[t.geoxFieldname],e[t.geoyFieldname]]))})),t.props.updateFunction(t.props.name,e)}))}},{key:"removeDuplicates",value:function(e,t){var a=this.props.component.uniqueField,n=e.map((function(e,t){return e[a]})),o=[];return t.forEach((function(e,t){!n.includes(e[a])&&o.push(e)})),o}}]),t}(p.Component);t.default=v},720:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGeolocation=function(e){if(!navigator.geolocation)return!1;navigator.geolocation.getCurrentPosition(e)},t.calculateDistance=function(e,t){var a=parseFloat(t[0]),n=parseFloat(e[0]),o=parseFloat(t[1]),s=parseFloat(e[1]),i=s*Math.PI/180,r=o*Math.PI/180,l=(o-s)*Math.PI/180,c=(a-n)*Math.PI/180,p=Math.sin(l/2)*Math.sin(l/2)+Math.cos(i)*Math.cos(r)*Math.sin(c/2)*Math.sin(c/2),d=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p));return 6371e3*d},t.formatDistance=function(e){if(!e)return e;var t="m";e>1e3&&(e/=1e3,t="km");return(e=e.toFixed(2)).toString()+t},t.geolocationActive=function(){return!!navigator.geolocation}}}]);