/*! For license information please see 38.bundle.e99519aee632fa1f760c.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{130:function(e,t,n){"use strict";function o(e){return!!(e.conditionField&&e.conditionValue&&"function"==typeof e.conditionField.forEach&&"function"==typeof e.conditionValue.forEach&&e.conditionField.length>0&&e.conditionField.length===e.conditionValue.length)}function l(e,t){var n=!0;return e.conditionField.forEach((function(o,l){void 0===t[o]?n=!1:null===t[o]||t[o].value||String(t[o])===String(e.conditionValue[l])?(t[o]&&t[o].value&&String(t[o].value)!==String(e.conditionValue[l])||null===t[o]&&null!==e.conditionValue[l])&&(n=!1):n=!1}),this),n}Object.defineProperty(t,"__esModule",{value:!0}),t.hasConditions=o,t.checkConditions=l,t.default=function(e,t){return!o(e)||l(e,t)}},1480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(45)),l=c(n(46)),a=c(n(47)),i=c(n(48)),r=c(n(49)),s=n(17),u=c(s),d=c(n(130));function c(e){return e&&e.__esModule?e:{default:e}}var f=u.default.lazy((function(){return n.e(4).then(n.t.bind(null,590,7))})),m=u.default.lazy((function(){return n.e(6).then(n.t.bind(null,591,7))})),p=u.default.lazy((function(){return n.e(5).then(n.t.bind(null,639,7))})),h=u.default.lazy((function(){return n.e(1).then(n.t.bind(null,244,7))})),b=u.default.lazy((function(){return Promise.resolve().then(n.t.bind(null,592,7))})),g=function(e){function t(e){(0,l.default)(this,t);var n=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.renderDefaultContent=n.renderDefaultContent.bind(n),n.openModal=n.openModal.bind(n),n.closeModal=n.closeModal.bind(n),n.closeAndClearModal=n.closeAndClearModal.bind(n),n.onAjaxDone=n.onAjaxDone.bind(n),n.onAjaxFail=n.onAjaxFail.bind(n),n.showForm=n.showForm.bind(n),n.submitForm=n.submitForm.bind(n),n.onFormSubmitDone=n.onFormSubmitDone.bind(n),n.onFormSubmitFail=n.onFormSubmitFail.bind(n),n.state={showModal:!1,modalContent:n.renderDefaultContent()},n}return(0,r.default)(t,e),(0,a.default)(t,[{key:"renderDefaultContent",value:function(){return u.default.createElement(p,{title:this.props.field.label,onConfirm:this.closeModal,confirmButtonText:this.props.field.closeButtonText},u.default.createElement("div",{style:{textAlign:"center",margin:"auto"}},u.default.createElement("img",{src:"bundles/con4gisframework/img/preloader-image.svg",className:"preloader-image",alt:""})))}},{key:"openModal",value:function(){var e=this.props.field.url;this.props.field.urlField&&(e=e.replace(this.props.field.urlField,this.props.data[this.props.field.urlField])),jQuery.get(e).done(this.onAjaxDone).fail(this.onAjaxFail),this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.setState({showModal:!1})}},{key:"closeAndClearModal",value:function(){this.setState({showModal:!1,modalContent:this.renderDefaultContent()})}},{key:"onAjaxDone",value:function(e){try{this.showForm(e)}catch(e){console.error(e),this.closeModal()}}},{key:"onAjaxFail",value:function(e){var t=e.responseJSON;t.error?this.setState({modalContent:u.default.createElement(m,{title:t.error.title,message:t.error.message,onConfirm:this.closeModal,confirmButtonText:t.error.confirmButtonText})}):this.closeModal()}},{key:"showForm",value:function(e){var t=this;try{var n=this.props.fields.filter((function(e){return e.type!==t.props.field.type})),o={updateFunction:function(){}},l=u.default.createElement("div",{className:this.props.className||"c4g-modal-content"},u.default.createElement("div",null,u.default.createElement("span",{className:"title"},this.props.field.label)),u.default.createElement("form",null,u.default.createElement("div",null,u.default.createElement(s.Suspense,{fallback:u.default.createElement("div",{style:{textAlign:"center",margin:"auto"}},u.default.createElement("img",{src:"bundles/con4gisframework/img/preloader-image.svg",className:"preloader-image",alt:""}))},u.default.createElement("div",null,n.map((function(e,o){return u.default.createElement(b,{data:t.props.data,field:e,fields:n,key:o,detail:t.props.detail,languageRefs:t.props.languageRefs})}))),e.formFields.map((function(n,l){return u.default.createElement(h,{form:{props:o,fields:e.formFields},field:n,data:e.formData||[],key:l+1,languageRefs:t.props.languageRefs})})))),u.default.createElement("div",null,u.default.createElement("button",{className:"highlight",type:"button",onClick:this.submitForm},this.props.field.confirmButtonText),u.default.createElement("button",{type:"button",onClick:this.closeModal},this.props.field.closeButtonText))));this.setState({modalContent:l})}catch(e){console.error(e),this.closeModal()}}},{key:"submitForm",value:function(e){for(var t=e.target.form.elements,n={},o=0;o<t.length;){var l=t.item(o);l.name&&(n[l.name]=l.value),o+=1}jQuery.post(this.props.field.submitUrl,n).done(this.onFormSubmitDone).fail(this.onFormSubmitFail)}},{key:"onFormSubmitDone",value:function(e){e&&e.success?this.setState({modalContent:u.default.createElement(m,{title:e.success.title,message:e.success.message,onConfirm:this.closeAndClearModal,confirmButtonText:this.props.field.closeButtonText})}):this.closeModal()}},{key:"onFormSubmitFail",value:function(e){var t=e.responseJSON;t&&t.error?this.setState({modalContent:u.default.createElement(m,{title:t.error.title,message:t.error.message,onConfirm:this.showForm.bind(this,t),confirmButtonText:this.props.field.closeButtonText})}):this.closeModal()}},{key:"render",value:function(){return(0,d.default)(this.props.field,this.props.data)?u.default.createElement("div",{className:"detail-field-text"+(this.props.field.class?" "+this.props.field.class:"")},u.default.createElement("button",{className:this.props.field.name,onClick:this.openModal},this.props.field.label),u.default.createElement(f,{show:this.state.showModal},this.state.modalContent)):null}}]),t}(s.Component);t.default=g}}]);