/*! For license information please see 413.bundle.9e3447cf30fe999d3a16.js.LICENSE.txt */
(self.webpackChunkframeworkbundle=self.webpackChunkframeworkbundle||[]).push([[413],{48167:(t,e,o)=>{"use strict";var n=o(60093);Object.defineProperty(e,"__esModule",{value:!0}),e.AlertHandler=void 0;var a=n(o(9344)),r=n(o(62708)),i=n(o(69554)),l=n(o(41743)),u=n(o(75690)),s=function(){function t(){(0,i.default)(this,t)}var e;return(0,l.default)(t,[{key:"showErrorDialog",value:function(t,e,o){u.default.fire({title:t,text:e,type:"error",customClass:o||""})}},{key:"showInfoDialog",value:function(t,e,o){u.default.fire({title:t,text:e,type:"info",customClass:o||""})}},{key:"showInfoActionDialog",value:function(t,e,o,n){u.default.fire({title:t,text:e,type:"info",customClass:n||""}).then((function(){o()}))}},{key:"showInfoActionDialog2",value:function(t,e,o,n){u.default.fire({title:t,text:e,type:"info",showLoaderOnConfirm:!0,customClass:n||"",preConfirm:function(t){o()}})}},{key:"showConfirmDialog",value:function(t,e,o,n,a,r,i){u.default.fire({title:t,text:e,type:"warning",showCancelButton:!0,confirmButtonText:a||"Confirm",cancelButtonText:r||"Cancel",dangerMode:!0,customClass:i||""}).then((function(t){t.value?o():n()}))}},{key:"showConfirmDialogHTML",value:function(t,e,o,n,a,r,i){u.default.fire({title:t,html:e,type:"warning",showCancelButton:!0,confirmButtonText:a||"Confirm",cancelButtonText:r||"Cancel",dangerMode:!0,customClass:i||""}).then((function(t){t.value?o():n()}))}},{key:"showPreConfirmDialog",value:function(t,e,o,n,a,r,i){u.default.fire({title:t,text:e,type:"warning",showCancelButton:!0,confirmButtonText:n||"Confirm",cancelButtonText:a||"Cancel",showLoaderOnConfirm:i||!0,preConfirm:function(){return new Promise((function(t){o()}))},allowOutsideClick:function(){return!u.default.isLoading()},dangerMode:!0,customClass:r||""})}},{key:"showLoadingDialog",value:function(t,e,o,n){u.default.fire({title:t,text:e,showCancelButton:!1,allowEscapeKey:!1,allowOutsideClick:!1,showLoaderOnConfirm:!0,onBeforeOpen:function(){u.default.clickConfirm()},customClass:n||"",preConfirm:function(){return new Promise((function(t){o()}))}})}},{key:"showSelectDialog",value:(e=(0,r.default)(a.default.mark((function t(e,o,n,r,i){var l,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.fire({title:e,input:"select",inputOptions:o,inputPlaceholder:"Select a fruit",showCancelButton:!0,confirmButtonText:n,cancelButtonText:r,customClass:i||""});case 2:return l=t.sent,s=l.value,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)}))),function(t,o,n,a,r){return e.apply(this,arguments)})}]),t}();e.AlertHandler=s},60413:(t,e,o)=>{"use strict";var n=o(95318),a=o(50008);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(o(34575)),i=n(o(93913)),l=n(o(81506)),u=n(o(2205)),s=n(o(78585)),c=n(o(29754)),f=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var o=m(e);if(o&&o.has(t))return o.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var l=r?Object.getOwnPropertyDescriptor(t,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=t[i]}n.default=t,o&&o.set(t,n);return n}(o(67294)),d=n(o(6404)),p=o(48167);function m(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(m=function(t){return t?o:e})(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=(0,c.default)(t);if(e){var a=(0,c.default)(this).constructor;o=Reflect.construct(n,arguments,a)}else o=n.apply(this,arguments);return(0,s.default)(this,o)}}var h=function(t){(0,u.default)(o,t);var e=v(o);function o(t){var n;return(0,r.default)(this,o),(n=e.call(this,t)).clickButton=n.clickButton.bind((0,l.default)(n)),n.submitCallback=n.submitCallback.bind((0,l.default)(n)),n}return(0,i.default)(o,[{key:"clickButton",value:function(t){this.props.form.props.component.renderAsForm?this.props.form.activeButton=this:this.submitCallback(this.props.form,t)}},{key:"submitCallback",value:function(t,e){e.preventDefault(),e.stopPropagation();var o=this.props.form.props.component.data;this.geopickerFieldExists()&&(o=this.setGeoData(o)),o&&this.validateData(o)&&this.submitData(o)}},{key:"submitData",value:function(t){var e=this;this.props.form.setLoading(!0),jQuery.post(this.props.button.url,t).done((function(t){if(e.props.form.setLoading(!1),e.props.button.redirectUrl)if(t.success){var o=e.props.button.redirectUrl;e.props.button.redirectUrl.endsWith("/")&&t.alias&&(o+=t.alias),e.props.form.storePosition(),window.location=o}else e.props.form.setErrorTexts(t.fields)}))}},{key:"setGeoData",value:function(t){var e=this.props.form.mapControllerRef,o=e.mapsControls.controls.geopicker,n=e.mapsControls.controls.editor;if(o&&o.$fieldGeoX&&o.$fieldGeoY){var a=o.$fieldGeoX.val(),r=o.$fieldGeoY.val();if(t.geox=a,t.geoy=r,!t.geox&&!t.geoy&&t.locationCity&&t.locationStreet)return this.addPosition(t,e),!1;if(t.geox&&t.geoy&&(!t.locationCity||!t.locationStreet||!t.locationStreetNumber))return this.addAddress(t,e),!1}else if(n&&e.data.editor&&e.data.editor.inputField){var i=$(e.data.editor.inputField).val();t.geojson=i}return t}},{key:"validateData",value:function(t){if(t.published){var e=this.props.form.props.component.fields;for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];if(n.required&&(0,d.default)(n,t)&&!t[n.name]){var a=$("#"+n.name);return a.focus(),a.keyup((function(){$(this).removeClass("field-invalid"),$(this).off("keyup")})),a.addClass("field-invalid"),!1}}if(!this.checkZipcode(t))return!1}return!0}},{key:"checkZipcode",value:function(t){var e=this;try{if(t.geox&&t.geoy&&t.locationZip){var o=this.props.form.mapControllerRef,n=o.data.geosearch.url+"reverse.php?key=";return n+=o.data.geosearch.reverseKey,n+="&lon="+t.geox,n+="&lat="+t.geoy,n+="&format=json",jQuery.ajax({dataType:"json",url:n}).done((function(o){if(o&&o.address&&o.address.postcode)if(o.address.postcode===t.locationZip)e.submitData(t);else{var n=$("#locationZip");n.focus(),n.keyup((function(){$(this).removeClass("field-invalid"),$(this).off("keyup")})),n.addClass("field-invalid");var a=new p.AlertHandler,r=e.props.languageRefs.CHECK_POSITION,i=e.props.languageRefs.POSITION_OUT_OF_RANGE;a.showErrorDialog(r,i)}else e.submitData(t)})).fail((function(){e.submitData(t)})),!1}return!0}catch(t){return!0}}},{key:"addPosition",value:function(t,e){var o=this,n=t.locationCity,a=t.locationStreet,r=t.locationStreetNumber,i=e.data.geosearch.url+"search.php?format=json&limit=1",l=e.data.geosearch.searchKey;i+=n?"&city="+encodeURIComponent(n):"",i+=a?"&street="+encodeURIComponent(r+" "+a):"",i+="&key="+l,jQuery.ajax({dataType:"json",url:i}).done((function(e){if(e[0]&&e[0].lon&&e[0].lat){var n=e[0],a=new p.AlertHandler,r="<b>Breite:</b> "+n.lat+" <br><b>Länge:</b> "+n.lon,i=o.props.languageRefs.ADD_GEOLOCATION,l=o.props.languageRefs.SAVE_WITH_POSITION,u=o.props.languageRefs.SAVE_WITHOUT_POSITION;a.showConfirmDialogHTML(i,r,(function(){var t=o.props.form.props.component.data;t.geoy=n.lat,t.geox=n.lon,o.validateData(t)&&o.submitData(t)}),(function(){var t=o.props.form.props.component.data;o.validateData(t)&&o.submitData(t)}),l,u)}else o.validateData(t)&&o.submitData(t)})).fail((function(){o.validateData(t)&&o.submitData(t)}))}},{key:"addAddress",value:function(t,e){var o=this,n=e.data.geosearch.url+"reverse.php?key=";n+=e.data.geosearch.reverseKey,n+="&lon="+t.geox,n+="&lat="+t.geoy,n+="&format=json",jQuery.ajax({dataType:"json",url:n}).done((function(e){var n=new p.AlertHandler,a=t.locationCity,r=t.locationStreet,i=t.locationStreetNumber,l="";a||(l+="<b>Ort:</b> "+(a=e.address.city||e.address.town||e.address.village)+"<br>"),r||(l+="<b>Straße:</b> "+(r=e.address.road||e.address.street)+"<br>"),i||(l+="<b>Hausnummer:</b> "+(i=e.address.house_number)+"<br>");var u=o.props.languageRefs.ADD_ADDRESS,s=o.props.languageRefs.SAVE_WITH_ADDRESS,c=o.props.languageRefs.SAVE_WITHOUT_ADDRESS;l?n.showConfirmDialogHTML(u,l,(function(){var t=o.props.form.props.component.data;t.locationCity=a,t.locationStreet=r,t.locationStreetNumber=i,o.validateData(t)&&o.submitData(t)}),(function(){var t=o.props.form.props.component.data;o.validateData(t)&&o.submitData(t)}),s,c):o.validateData(t)&&o.submitData(t)})).fail((function(){o.validateData(t)&&o.submitData(t)}))}},{key:"render",value:function(){return f.default.createElement("button",{className:this.props.button.className+" btn btn-primary mr-3",type:"submit",onClick:this.clickButton},this.props.button.caption)}},{key:"geopickerFieldExists",value:function(){for(var t=this.props.form.props.component.fields,e=0;e<t.length;e++)if("geopicker"===t[e].type)return!0;return!1}}]),o}(f.Component);e.default=h},6404:(t,e)=>{"use strict";function o(t){return!!(t.conditionField&&t.conditionValue&&"function"==typeof t.conditionField.forEach&&"function"==typeof t.conditionValue.forEach&&t.conditionField.length>0&&t.conditionField.length===t.conditionValue.length)}function n(t,e){var o=!0;return t.conditionField.forEach((function(n,a){void 0===e[n]?o=!1:null===e[n]||e[n].value||String(e[n])===String(t.conditionValue[a])?(e[n]&&e[n].value&&String(e[n].value)!==String(t.conditionValue[a])||null===e[n]&&null!==t.conditionValue[a])&&(o=!1):o=!1}),this),o}Object.defineProperty(e,"__esModule",{value:!0}),e.hasConditions=o,e.checkConditions=n,e.default=function(t,e){return!o(t)||n(t,e)}}}]);