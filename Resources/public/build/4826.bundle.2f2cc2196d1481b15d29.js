/*! For license information please see 4826.bundle.2f2cc2196d1481b15d29.js.LICENSE.txt */
(self.webpackChunkframeworkbundle=self.webpackChunkframeworkbundle||[]).push([[4826],{34826:(e,t,i)=>{"use strict";var a=i(95318),n=i(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(i(87757)),l=a(i(48926)),o=a(i(34575)),u=a(i(93913)),s=a(i(81506)),p=a(i(2205)),f=a(i(78585)),d=a(i(29754)),c=a(i(59713)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=y(t);if(i&&i.has(e))return i.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e,i&&i.set(e,a);return a}(i(67294)),m=a(i(96120));i(53719);var g=a(i(86455)),v=a(i(49303)),C=a(i(6404));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(y=function(e){return e?i:t})(e)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return(0,f.default)(this,i)}}var b=function(e){(0,p.default)(n,e);var t,i,a=w(n);function n(e){var t;return(0,o.default)(this,n),t=a.call(this,e),(0,c.default)((0,s.default)(t),"onSelectFile",(function(e){if(e.target.files&&e.target.files.length>0)if(t.checkFileSize(e.target.files[0]))if(t.allowedFileTypes.includes(e.target.files[0].type)){var i=e.target.files[0].name,a=e.target.files[0].type;(0,v.default)(e.target.files[0],(function(e){var n=e.toDataURL(a);t.setState({src:n,imageName:i})}),{orientation:!0,canvas:!0})}else g.default.fire({icon:"error",title:t.props.field.titleFileTooBig,text:t.props.field.textFileTooBig}),e.target.value="";else g.default.fire({icon:"error",title:t.props.field.titleFileTooBig,text:t.props.field.textFileTooBig}),e.target.value=""})),(0,c.default)((0,s.default)(t),"onImageLoaded",(function(e){t.imageRef=e;var i=JSON.parse(JSON.stringify(t.state.crop));if(t.props.data[t.props.field.name]){var a=t.props.data[t.props.field.name].importantPart;return i.x=a.x*t.imageRef.width,i.y=a.y*t.imageRef.height,i.width=a.width*t.imageRef.width,i.height=a.height*t.imageRef.height,i.unit="px",t.setState({crop:i},(function(){return t.onCropComplete(i)})),!1}})),(0,c.default)((0,s.default)(t),"onCropChange",(function(e,i){t.setState({crop:i})})),t.getCroppedImg=t.getCroppedImg.bind((0,s.default)(t)),t.onSelectFile=t.onSelectFile.bind((0,s.default)(t)),t.onImageLoaded=t.onImageLoaded.bind((0,s.default)(t)),t.onCropComplete=t.onCropComplete.bind((0,s.default)(t)),t.makeClientCrop=t.makeClientCrop.bind((0,s.default)(t)),t.onCropChange=t.onCropChange.bind((0,s.default)(t)),t.unsetImage=t.unsetImage.bind((0,s.default)(t)),t.state={src:null,imageName:"",crop:{unit:"%",width:90,height:90,x:5,y:5},croppedImageUrl:null},t.props.data[t.props.field.name]&&(t.state.src=t.props.data[t.props.field.name].path,t.state.imageName=t.props.data[t.props.field.name].name),t.allowedFileTypes=["image/png","image/jpeg","image/jpg"],t.inputRef=null,t}return(0,u.default)(n,[{key:"onCropComplete",value:(i=(0,l.default)(r.default.mark((function e(t){var i,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeClientCrop(t);case 2:i={imageData:this.state.src,importantPart:{x:t.x/this.imageRef.width,y:t.y/this.imageRef.height,width:t.width/this.imageRef.width,height:t.height/this.imageRef.height},imageName:this.state.imageName},(a=this.props.data)[this.props.field.name]=i,this.props.form.props.updateFunction(this.props.form.props.name,a);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"makeClientCrop",value:(t=(0,l.default)(r.default.mark((function e(t){var i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 3:i=e.sent,this.setState({croppedImageUrl:i});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getCroppedImg",value:function(e,t,i){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;return a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height),a.toDataURL("image/jpeg")}},{key:"checkFileSize",value:function(e){var t,i=e.size;return!(i>1e3&&(t=i/1e3)>1e3&&t/1e3>6)}},{key:"render",value:function(){var e=this;if(!(0,C.default)(this.props.field,this.props.data))return null;var t=null;this.props.field.label&&(t=this.props.field.required?h.default.createElement("label",{className:"label-file c4g-required"},this.props.field.label):h.default.createElement("label",{className:"label-file"},this.props.field.label));var i=this.state,a=i.crop,n=i.croppedImageUrl,r=i.src,l=this.props.field.name,o=null;return this.props.field.description&&(o=h.default.createElement("small",{className:"field-description form-text text-muted"},this.props.field.description)),h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:"form-group"},t,h.default.createElement("input",{type:"file",accept:".jpg, .png, .jpeg",onChange:this.onSelectFile,id:l,ref:function(t){e.inputRef=t},name:l+(this.props.field.max>1?"[]":""),className:"form-control-file"}),o),r&&h.default.createElement(m.default,{src:r,crop:a,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),n&&h.default.createElement("img",{alt:"Crop",style:{maxWidth:"100%"},src:n}),r&&h.default.createElement("button",{onClick:this.unsetImage,title:this.props.languageRefs.CLICK_TO_REMOVE_IMAGE,className:"btn btn-primary remove-image "+this.props.field.name},this.props.languageRefs.REMOVE_IMAGE))}},{key:"unsetImage",value:function(){var e=this.props.data;e[this.props.field.name]=null,this.setState({src:null,imageName:null,crop:null,croppedImageUrl:null}),null!==this.inputRef&&(this.inputRef.value=""),this.props.form.props.updateFunction(this.props.form.props.name,e)}}]),n}(h.Component);t.default=b},6404:(e,t)=>{"use strict";function i(e){return!!(e.conditionField&&e.conditionValue&&"function"==typeof e.conditionField.forEach&&"function"==typeof e.conditionValue.forEach&&e.conditionField.length>0&&e.conditionField.length===e.conditionValue.length)}function a(e,t){var i=!0;return e.conditionField.forEach((function(a,n){void 0===t[a]?i=!1:null===t[a]||t[a].value||String(t[a])===String(e.conditionValue[n])?(t[a]&&t[a].value&&String(t[a].value)!==String(e.conditionValue[n])||null===t[a]&&null!==e.conditionValue[n])&&(i=!1):i=!1}),this),i}Object.defineProperty(t,"__esModule",{value:!0}),t.hasConditions=i,t.checkConditions=a,t.default=function(e,t){return!i(e)||a(e,t)}}}]);