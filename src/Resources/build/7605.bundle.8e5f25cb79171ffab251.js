/*! For license information please see 7605.bundle.8e5f25cb79171ffab251.js.LICENSE.txt */
"use strict";(self.webpackChunkframeworkbundle=self.webpackChunkframeworkbundle||[]).push([[7605],{97605:(e,t,a)=>{var i=a(95318),l=a(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(87757)),r=i(a(48926)),o=i(a(34575)),s=i(a(93913)),u=i(a(81506)),d=i(a(2205)),p=i(a(78585)),c=i(a(29754)),f=i(a(59713)),h=C(a(67294)),m=C(a(96120));a(53719);var g=i(a(86455)),v=i(a(49303)),E=i(a(20349));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=e[r]}return i.default=e,a&&a.set(e,i),i}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,i=(0,c.default)(e);if(t){var l=(0,c.default)(this).constructor;a=Reflect.construct(i,arguments,l)}else a=i.apply(this,arguments);return(0,p.default)(this,a)}}var w=function(e){(0,d.default)(l,e);var t,a,i=y(l);function l(e){var t;return(0,o.default)(this,l),t=i.call(this,e),(0,f.default)((0,u.default)(t),"onSelectFile",(function(e){if(e.target.files&&e.target.files.length>0)if(t.checkFileSize(e.target.files[0]))if(t.allowedFileTypes.includes(e.target.files[0].type)){var a=e.target.files[0].name,i=e.target.files[0].type;(0,v.default)(e.target.files[0],(function(e){var l=e.toDataURL(i);t.setState({src:l,imageName:a,scale:1,rotate:0})}),{orientation:!0,canvas:!0})}else g.default.fire({icon:"error",title:t.props.field.titleFileTooBig,text:t.props.field.textFileTooBig}),e.target.value="";else g.default.fire({icon:"error",title:t.props.field.titleFileTooBig,text:t.props.field.textFileTooBig}),e.target.value=""})),(0,f.default)((0,u.default)(t),"onImageLoaded",(function(e){t.imageRef=e.currentTarget;var a=JSON.parse(JSON.stringify(t.state.crop));if(t.props.data[t.props.field.name]){var i=t.props.data[t.props.field.name].importantPart;return a.x=i.x*t.imageRef.width,a.y=i.y*t.imageRef.height,a.width=i.width*t.imageRef.width,a.height=i.height*t.imageRef.height,a.unit="px",t.setState({crop:a},(function(){return t.onCropComplete(a)})),!1}})),(0,f.default)((0,u.default)(t),"onCropChange",(function(e,a){t.setState({crop:a})})),t.getCroppedImg=t.getCroppedImg.bind((0,u.default)(t)),t.onSelectFile=t.onSelectFile.bind((0,u.default)(t)),t.onImageLoaded=t.onImageLoaded.bind((0,u.default)(t)),t.onCropComplete=t.onCropComplete.bind((0,u.default)(t)),t.makeClientCrop=t.makeClientCrop.bind((0,u.default)(t)),t.onCropChange=t.onCropChange.bind((0,u.default)(t)),t.unsetImage=t.unsetImage.bind((0,u.default)(t)),t.state={src:null,imageName:"",crop:{unit:"%",width:90,height:90,x:5,y:5,scale:1,rotate:0,aspect:16/9,completeCrop:0},croppedImageUrl:null},t.props.data[t.props.field.name]&&(t.state.src=t.props.data[t.props.field.name].path,t.state.imageName=t.props.data[t.props.field.name].name),t.allowedFileTypes=["image/png","image/jpeg","image/jpg"],t.inputRef=null,t}return(0,s.default)(l,[{key:"onCropComplete",value:(a=(0,r.default)(n.default.mark((function e(t){var a,i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeClientCrop(t);case 2:a={imageData:this.state.croppedImageUrl?this.state.croppedImageUrl:this.state.src,path:this.state.src,importantPart:{x:this.imageRef?t.x/this.imageRef.width:0,y:this.imageRef?t.y/this.imageRef.height:0,width:this.imageRef?t.width/this.imageRef.width:1,height:this.imageRef?t.height/this.imageRef.height:1},imageName:this.state.imageName},(i=this.props.data)[this.props.field.name]=a,this.props.form.props.updateFunction(this.props.form.props.name,i,this.props.field);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"makeClientCrop",value:(t=(0,r.default)(n.default.mark((function e(t){var a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,t,this.state.scale,this.state.rotate);case 3:a=e.sent,this.setState({croppedImageUrl:a});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getCroppedImg",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=document.createElement("canvas"),n=l.getContext("2d"),r=Math.PI/180;if(!n)throw new Error("No 2d context");var o=e.naturalWidth/e.width,s=e.naturalHeight/e.height,u=window.devicePixelRatio;l.width=Math.floor(t.width*o*u),l.height=Math.floor(t.height*s*u),n.scale(u,u),n.imageSmoothingQuality="high";var d=t.x*o,p=t.y*s,c=i*r,f=e.naturalWidth/2,h=e.naturalHeight/2;return n.save(),n.translate(-d,-p),n.translate(f,h),n.rotate(c),n.scale(a,a),n.translate(-f,-h),n.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,e.naturalWidth,e.naturalHeight),n.restore(),l.toDataURL("image/jpeg")}},{key:"checkFileSize",value:function(e){var t,a=e.size;return!(a>1e3&&(t=a/1e3)>1e3&&t/1e3>6)}},{key:"render",value:function(){var e=this;if(!(0,E.default)(this.props.field,this.props.data,this.props.fields))return null;var t=null;this.props.field.label&&(t=this.props.field.required?h.default.createElement("label",{className:"label-file c4g-required"},this.props.field.label):h.default.createElement("label",{className:"label-file"},this.props.field.label));var a=this.props.field.name,i=null;return this.props.field.description&&(i=h.default.createElement("small",{className:"field-description form-text text-muted"},this.props.field.description)),this.state.scale=this.state.scale?this.state.scale:1,this.state.rotate=this.state.rotate?this.state.rotate:0,h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:"form-group"},t,h.default.createElement("div",{className:"Crop-Controls"},h.default.createElement("input",{type:"file",accept:".jpg, .png, .jpeg",onChange:this.onSelectFile,id:a,ref:function(t){e.inputRef=t},name:a+(this.props.field.max>1?"[]":""),className:"form-control-file"}),i,h.default.createElement("div",null,h.default.createElement("label",{hidden:!this.state.src,htmlFor:"scale-input"},"Skalieren: ")," ",h.default.createElement("input",{id:"scale-input",type:"range",step:"0.1",min:"1",max:"2",list:"scale-list",value:this.state.scale?this.state.scale:1,disabled:!this.state.src,hidden:!this.state.src,onChange:function(t){e.setState({scale:Number(t.target.value)},(function(){return e.onCropComplete(e.state.crop)})),t.target.value=""}}),h.default.createElement("output",{hidden:!this.state.src,className:"scale-output",htmlFor:"scale-input"},Math.trunc(100*this.state.scale)," %"),h.default.createElement("datalist",{id:"scale-list"},h.default.createElement("option",{value:"1",label:"0%"}),h.default.createElement("option",{value:"1.1"}),h.default.createElement("option",{value:"1.2"}),h.default.createElement("option",{value:"1.3"}),h.default.createElement("option",{value:"1.4"}),h.default.createElement("option",{value:"1.5",label:"50%"}),h.default.createElement("option",{value:"1.6"}),h.default.createElement("option",{value:"1.7"}),h.default.createElement("option",{value:"1.8"}),h.default.createElement("option",{value:"1.9"}),h.default.createElement("option",{value:"2",label:"100%"}))),h.default.createElement("div",null,h.default.createElement("label",{hidden:!this.state.src,htmlFor:"rotate-input"},"Rotieren: ")," ",h.default.createElement("input",{id:"rotate-input",type:"range",min:"0",max:"360",step:"30",list:"rotate-list",value:this.state.rotate?this.state.rotate:0,disabled:!this.state.src,hidden:!this.state.src,onChange:function(t){e.setState({rotate:Number(t.target.value)},(function(){return e.onCropComplete(e.state.crop)})),t.target.value=""}}),h.default.createElement("output",{hidden:!this.state.src,className:"rotate-output",htmlFor:"rotate-input"},this.state.rotate," Â°"),h.default.createElement("datalist",{id:"rotate-list"},h.default.createElement("option",{value:"0",label:"0"}),h.default.createElement("option",{value:"30"}),h.default.createElement("option",{value:"60"}),h.default.createElement("option",{value:"90",label:"90"}),h.default.createElement("option",{value:"120"}),h.default.createElement("option",{value:"150"}),h.default.createElement("option",{value:"180",label:"180"}),h.default.createElement("option",{value:"210"}),h.default.createElement("option",{value:"240"}),h.default.createElement("option",{value:"270",label:"270"}),h.default.createElement("option",{value:"300"}),h.default.createElement("option",{value:"330"}),h.default.createElement("option",{value:"360",label:"360"})))),Boolean(this.state.src)&&h.default.createElement(m.default,{src:this.state.src,crop:this.state.crop,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onChange:this.onCropChange,onComplete:this.onCropComplete,aspect:this.state.aspect},h.default.createElement("img",{ref:function(t){e.inputRef=t},alt:"Crop me",src:this.state.src,style:{transform:"scale(".concat(this.state.scale,") rotate(").concat(this.state.rotate,"deg)"),border:"1px solid black",objectFit:"contain",width:this.props.field.targetWidth/5+"px",maxheight:this.props.field.targetHeight/5+"px",maxWidth:"auto"},onLoad:this.onImageLoaded})),h.default.createElement("label",{class:"form-group-crop-label",hidden:!this.state.croppedImageUrl},this.props.languageRefs.CROP_PREVIEW_LABEL),this.state.croppedImageUrl&&h.default.createElement("img",{alt:"Crop",src:this.state.croppedImageUrl,style:{border:"1px solid black",objectFit:"contain",width:this.props.field.targetWidth/5+"px",maxHeight:this.props.field.targetHeight/5+"px",maxWidth:"auto"}}),this.state.src&&h.default.createElement("button",{onClick:this.unsetImage,title:this.props.languageRefs.CLICK_TO_REMOVE_IMAGE,className:"btn btn-primary btn-remove remove-image "+this.props.field.name},this.props.languageRefs.REMOVE_IMAGE)))}},{key:"unsetImage",value:function(){var e=this.props.data;e[this.props.field.name]=null,this.setState({src:null,imageName:null,crop:null,croppedImageUrl:null,scale:1,rotate:0}),null!==this.inputRef&&(this.inputRef.value=""),this.props.form.props.updateFunction(this.props.form.props.name,e,this.props.field)}}]),l}(h.Component);t.default=w},20349:(e,t)=>{function a(e){if(e.conditionField&&e.conditionValue&&"function"==typeof e.conditionField.forEach&&"function"==typeof e.conditionValue.forEach&&e.conditionField.length>0){if(e.conditionField.length===e.conditionValue.length)return!0;if(e.conditionValue.length>1&&1===e.conditionField.length)return!0}return!1}function i(e,t){var a=!0;if(e.conditionField.length===e.conditionValue.length)e.conditionField.forEach((function(i,l){void 0===t[i]?a=!1:null===t[i]||t[i].value||String(t[i])===String(e.conditionValue[l])?(t[i]&&t[i].value&&String(t[i].value)!==String(e.conditionValue[l])||null===t[i]&&null!==e.conditionValue[l])&&(a=!1):a=!1}),this);else if(e.conditionValue.length>1&&1===e.conditionField.length){var i=e.conditionField[0];for(var l in a=!1,e.conditionValue)if(e.conditionValue.hasOwnProperty(l)){var n=e.conditionValue[l];if(t[i]&&t[i].value?t[i].value===n&&(a=!0):t[i]===n&&(a=!0),a)break}}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.checkConditions=i,t.default=function(e,t,l){if(a(e)){var n=null;if(l.forEach((function(t,a){1===e.conditionField.length&&t.name===e.conditionField[0]&&(n=t)})),null!==n){return a(n)?i(n,t)&&i(e,t):i(e,t)}return i(e,t)}return!0},t.hasConditions=a}}]);