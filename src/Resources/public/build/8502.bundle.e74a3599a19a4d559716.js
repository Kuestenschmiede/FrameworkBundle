/*! For license information please see 8502.bundle.e74a3599a19a4d559716.js.LICENSE.txt */
"use strict";(self.webpackChunkframeworkbundle=self.webpackChunkframeworkbundle||[]).push([[8502],{40691:(e,t)=>{function i(e){if(e.conditionField&&e.conditionValue&&"function"==typeof e.conditionField.forEach&&"function"==typeof e.conditionValue.forEach&&e.conditionField.length>0){if(e.conditionField.length===e.conditionValue.length)return!0;if(e.conditionValue.length>1&&1===e.conditionField.length)return!0}return!1}function n(e,t){var i=!0;if(e.conditionField.length===e.conditionValue.length)e.conditionField.forEach((function(n,a){void 0===t[n]?i=!1:null===t[n]||t[n].value||String(t[n])===String(e.conditionValue[a])?(t[n]&&t[n].value&&String(t[n].value)!==String(e.conditionValue[a])||null===t[n]&&null!==e.conditionValue[a])&&(i=!1):i=!1}),this);else if(e.conditionValue.length>1&&1===e.conditionField.length){var n=e.conditionField[0];for(var a in i=!1,e.conditionValue)if(e.conditionValue.hasOwnProperty(a)){var r=e.conditionValue[a];if(t[n]&&t[n].value?t[n].value===r&&(i=!0):t[n]===r&&(i=!0),i)break}}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.checkConditions=n,t.default=function(e,t,a){if(i(e)){var r=null;if(a.forEach((function(t,i){1===e.conditionField.length&&t.name===e.conditionField[0]&&(r=t)})),null!==r){return i(r)?n(r,t)&&n(e,t):n(e,t)}return n(e,t)}return!0},t.hasConditions=i},48502:(e,t,i)=>{var n=i(24994),a=i(73738);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(54756)),o=n(i(29293)),l=n(i(17383)),p=n(i(34579)),s=n(i(28452)),u=n(i(63072)),d=n(i(29511)),f=n(i(43693)),c=function(e,t){if("function"==typeof WeakMap)var i=new WeakMap,n=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,l={__proto__:null,default:e};if(null===e||"object"!=a(e)&&"function"!=typeof e)return l;if(r=t?n:i){if(r.has(e))return r.get(e);r.set(e,l)}for(var p in e)"default"!==p&&{}.hasOwnProperty.call(e,p)&&((o=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,p))&&(o.get||o.set)?r(l,p,o):l[p]=e[p]);return l}(e,t)}(i(96540)),h=n(i(98093));i(92461);var g=n(i(78465)),m=n(i(58202)),v=n(i(40691));function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}t.default=function(e){function t(e){var i,n,a,r;return(0,l.default)(this,t),n=this,a=t,r=[e],a=(0,u.default)(a),i=(0,s.default)(n,C()?Reflect.construct(a,r||[],(0,u.default)(n).constructor):a.apply(n,r)),(0,f.default)(i,"onSelectFile",(function(e){if(e.target.files&&e.target.files.length>0)if(i.checkFileSize(e.target.files[0]))if(i.allowedFileTypes.includes(e.target.files[0].type)){var t=e.target.files[0].name,n=e.target.files[0].type;(0,m.default)(e.target.files[0],(function(e){var a=e.toDataURL(n);i.setState({src:a,imageName:t})}),{orientation:!0,canvas:!0})}else g.default.fire({icon:"error",title:i.props.field.titleFileTooBig,text:i.props.field.textFileTooBig}),e.target.value="";else g.default.fire({icon:"error",title:i.props.field.titleFileTooBig,text:i.props.field.textFileTooBig}),e.target.value=""})),(0,f.default)(i,"onImageLoaded",(function(e){i.imageRef=e;var t=JSON.parse(JSON.stringify(i.state.crop));if(i.props.data[i.props.field.name]&&"00000000-0000-0000-0000-000000000000"!==i.props.data[i.props.field.name]){var n=i.props.data[i.props.field.name].importantPart;return n&&(t.x=n.x*i.imageRef.width,t.y=n.y*i.imageRef.height,t.width=n.width*i.imageRef.width,t.height=n.height*i.imageRef.height,t.unit="px"),i.setState({crop:t},(function(){return i.onCropComplete(t)})),!1}})),(0,f.default)(i,"onCropChange",(function(e,t){i.setState({crop:t})})),i.getCroppedImg=i.getCroppedImg.bind(i),i.onSelectFile=i.onSelectFile.bind(i),i.onImageLoaded=i.onImageLoaded.bind(i),i.onCropComplete=i.onCropComplete.bind(i),i.makeClientCrop=i.makeClientCrop.bind(i),i.onCropChange=i.onCropChange.bind(i),i.unsetImage=i.unsetImage.bind(i),i.state={src:null,imageName:"",crop:{unit:"%",width:90,height:90,x:5,y:5},croppedImageUrl:null},i.props.data[i.props.field.name]&&(i.state.src=i.props.data[i.props.field.name].path,i.state.imageName=i.props.data[i.props.field.name].name),i.allowedFileTypes=["image/png","image/jpeg","image/jpg"],i.inputRef=null,i}return(0,d.default)(t,e),(0,p.default)(t,[{key:"onCropComplete",value:(n=(0,o.default)(r.default.mark((function e(t){var i,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.makeClientCrop(t);case 1:i={imageData:this.state.src,importantPart:{x:t.x/this.imageRef.width,y:t.y/this.imageRef.height,width:t.width/this.imageRef.width,height:t.height/this.imageRef.height},imageName:this.state.imageName},(n=this.props.data)[this.props.field.name]=i,this.props.form.props.updateFunction(this.props.form.props.name,n,this.props.field);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"makeClientCrop",value:(i=(0,o.default)(r.default.mark((function e(t){var i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=2;break}return e.next=1,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 1:i=e.sent,this.setState({croppedImageUrl:i});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getCroppedImg",value:function(e,t,i){var n=document.createElement("canvas"),a=e.naturalWidth/e.width,r=e.naturalHeight/e.height;return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,t.x*a,t.y*r,t.width*a,t.height*r,0,0,t.width,t.height),n.toDataURL("image/jpeg")}},{key:"checkFileSize",value:function(e){var t,i=e.size;return!(i>1e3&&(t=i/1e3)>1e3&&t/1e3>6)}},{key:"render",value:function(){var e=this;if(!(0,v.default)(this.props.field,this.props.data,this.props.fields))return null;var t=null;this.props.field.label&&(t=this.props.field.required?c.default.createElement("label",{className:"label-file c4g-required"},this.props.field.label):c.default.createElement("label",{className:"label-file"},this.props.field.label));var i=this.state,n=i.crop,a=i.croppedImageUrl,r=i.src,o=this.props.field.name,l=null;return this.props.field.description&&(l=c.default.createElement("small",{className:"field-description form-text text-muted"},this.props.field.description)),c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"form-group"},t,c.default.createElement("input",{type:"file",accept:".jpg, .png, .jpeg",onChange:this.onSelectFile,id:o,ref:function(t){e.inputRef=t},name:o+(this.props.field.max>1?"[]":""),className:"form-control-file"}),l),r&&c.default.createElement(h.default,{src:r,crop:n,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),a&&c.default.createElement("img",{alt:"Crop",style:{maxWidth:"100%"},src:a}),r&&c.default.createElement("button",{onClick:this.unsetImage,title:this.props.languageRefs.CLICK_TO_REMOVE_IMAGE,className:"btn btn-primary btn-remove remove-image "+this.props.field.name},this.props.languageRefs.REMOVE_IMAGE))}},{key:"unsetImage",value:function(){var e=this.props.data;e[this.props.field.name]=null,this.setState({src:null,imageName:null,crop:null,croppedImageUrl:null}),null!==this.inputRef&&(this.inputRef.value=""),this.props.form.props.updateFunction(this.props.form.props.name,e,this.props.field)}}]);var i,n}(c.Component)}}]);