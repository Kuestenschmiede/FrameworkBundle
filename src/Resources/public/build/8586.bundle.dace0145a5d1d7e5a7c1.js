/*! For license information please see 8586.bundle.dace0145a5d1d7e5a7c1.js.LICENSE.txt */
"use strict";(self.webpackChunkframeworkbundle=self.webpackChunkframeworkbundle||[]).push([[8586],{18586(e,t,a){var r=a(29138),s=a(35578);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1367)),l=r(a(60163)),o=r(a(55956)),i=r(a(20880)),c=r(a(39959)),p=function(e,t){if("function"==typeof WeakMap)var a=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,o={__proto__:null,default:e};if(null===e||"object"!=s(e)&&"function"!=typeof e)return o;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,o)}for(var i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((l=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,i))&&(l.get||l.set)?n(o,i,l):o[i]=e[i]);return o}(e,t)}(a(42028)),u=a(13161),d=a(75508),h=a(79230),f=a(23624),y=a(46363);function m(e,t,a){return t=(0,i.default)(t),(0,o.default)(e,g()?Reflect.construct(t,a||[],(0,i.default)(e).constructor):t.apply(e,a))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}var v=p.default.lazy(function(){return Promise.resolve().then(a.bind(a,47702))});t.default=function(e){function t(e){var a;(0,n.default)(this,t);var r=a=m(this,t,[e]),s=document.createElement("div"),l=document.createElement("button");if(s.className="c4g-starboard-control ol-unselectable ol-control ",a.langConstants=(0,f.getLanguage)(e.mapController.data),e.mapController.data.themeData&&e.mapController.data.themeData.controlLabels){var o=document.createElement("span");o.innerText=a.langConstants.CTRL_STARBOARD,l.appendChild(o)}else l.title=a.langConstants.CTRL_STARBOARD;e.open?s.className+="c4g-open":s.className+="c4g-close",e.external&&(s.className+=" c4g-external"),s.appendChild(l),jQuery(s).on("click",function(e){r.state.open?r.close():r.open()});var i=e.mapController,c=new u.Control({element:s,target:e.target}),p=i.arrComponents.findIndex(function(e){return"layerswitcher"===e.name});return i.arrComponents[p].control=c,i.mapsControls.controls.horizontalPanel=c,a.open=a.open.bind(a),a.slideOutCollidingElements=a.slideOutCollidingElements.bind(a),a.resizeFunction=a.resizeFunction.bind(a),a.close=a.close.bind(a),a.createStylingForIcon=a.createStylingForIcon.bind(a),a.state={direction:e.direction||"right",open:e.open||!1,className:e.className||"c4g-starboard-panel",childs:e.childs||[],control:c,activeTab:0},a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"setActiveTab",value:function(e){this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=this.props.mapController.data;this.state.className,this.state.direction;this.state.open,this.state.open?jQuery(this.state.control.element).addClass("c4g-open").removeClass("c4g-close"):jQuery(this.state.control.element).removeClass("c4g-open").addClass("c4g-close");var a="",r=[];if(this.props.tabLayers.length>0){var s=p.default.createElement("button",{key:this.props.tabLayers.length,title:this.langConstants.STARBOARD_VIEW_TRIGGER_LAYERSWITCHER,className:"c4g-starboard-view-trigger-layerswitcher",onMouseUp:function(){e.setActiveTab(0)}});r.push(s),r.push(this.props.tabLayers.map(function(t,a){var r=t.awesomeIcon;return e.createStylingForIcon(r,a),p.default.createElement("button",{key:a,title:t[0].name,className:"c4g-starboard-view-trigger-tab-"+a,onMouseUp:function(){e.setActiveTab(a+1)}})})),a=p.default.createElement("div",{className:"c4g-starboard-switcher"},r)}var n="";return this.props.tabLayers.length>0&&(n=p.default.createElement(p.default.Fragment,null,this.props.tabLayers.map(function(t,a){return p.default.createElement(h.StarboardLayerswitcher,{key:a,mapController:e.props.mapController,objLayers:e.props.tabLayers[a],parentCallback:e.props.tabCallback,layerStates:e.props.tabStates,openfunc:e.open,headline:t[0].name,open:e.state.open,active:a+1===e.state.activeTab})}))),p.default.createElement("div",{className:d.cssConstants.STARBOARD_WRAPPER},p.default.createElement(p.Suspense,{fallback:p.default.createElement("div",null,"Loading...")},p.default.createElement(v,{wrapperClass:"c4g-starboard-header",headerClass:d.cssConstants.STARBOARD_HEADLINE,header:t.starboard.label||this.langConstants.STARBOARD,closeBtnClass:d.cssConstants.STARBOARD_CLOSE,closeBtnCb:this.close,closeBtnTitle:this.langConstants.CLOSE})),a,p.default.createElement("div",{className:d.cssConstants.STARBOARD_CONTENT_CONTAINER},p.default.createElement(h.StarboardLayerswitcher,{key:this.props.tabLayers.length,mapController:this.props.mapController,lang:this.langConstants,objLayers:this.props.objLayers,styleData:this.props.styleData,parentCallback:this.props.parentCallback,layerStates:this.props.layerStates,changeCollapseState:this.props.changeCollapseState,openfunc:this.open,headline:t.layerswitcher.label,open:this.state.open,active:0===e.state.activeTab}),n))}},{key:"createStylingForIcon",value:function(e,t){var a=document.createElement("style");a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet.insertRule("button.c4g-starboard-view-trigger-tab-"+t+':before {\n  content: "\\'+e+"\";\n  font-family: 'Font Awesome 5 Free';\n  font-weight: 900;\n  font-size: inherit;\n}")}},{key:"open",value:function(){var e=this;this.setState({open:!0},function(){return e.slideOutCollidingElements()}),this.props.mapController.setOpenComponent(this)}},{key:"close",value:function(){var e=this;this.setState({open:!1},function(){return e.slideInCollidingElements()})}},{key:"resizeFunction",value:function(){var e=this;window.requestAnimationFrame(function(){e.slideOutCollidingElements()})}},{key:"componentDidUpdate",value:function(e,t,a){if(this.state.open?this.slideOutCollidingElements():this.slideInCollidingElements(),this.props.mapController.data.caching){var r=y.utils.getValue("panel");"StarboardPanel"!==r||this.state.open?"StarboardPanel"!==r&&this.state.open&&y.utils.storeValue("panel","StarboardPanel"):y.utils.storeValue("panel","")}}},{key:"slideOutCollidingElements",value:function(){jQuery(".c4g-starboard-container").addClass("c4g-open").removeClass("c4g-close")}},{key:"slideInCollidingElements",value:function(){jQuery(".c4g-starboard-container").addClass("c4g-close").removeClass("c4g-open")}}])}(p.Component)},30307(e,t){t.VOID=-1;t.PRIMITIVE=0;t.ARRAY=1;t.OBJECT=2;t.DATE=3;t.REGEXP=4;t.MAP=5;t.SET=6;t.ERROR=7;t.BIGINT=8},37608(e,t,a){var r=a(29138),s=a(35578);Object.defineProperty(t,"__esModule",{value:!0}),t.C4gStarboardLayerElement=void 0;var n=r(a(74141)),l=r(a(1367)),o=r(a(60163)),i=r(a(55956)),c=r(a(20880)),p=r(a(39959)),u=g(a(42028)),d=(g(a(9055)),a(75508)),h=a(45451),f=a(58707),y=r(a(25089)),m=r(a(60718));function g(e,t){if("function"==typeof WeakMap)var a=new WeakMap,r=new WeakMap;return(g=function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,o={__proto__:null,default:e};if(null===e||"object"!=s(e)&&"function"!=typeof e)return o;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,o)}for(var i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((l=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,i))&&(l.get||l.set)?n(o,i,l):o[i]=e[i]);return o})(e,t)}function v(e,t,a){return t=(0,c.default)(t),(0,i.default)(e,C()?Reflect.construct(t,a||[],(0,c.default)(e).constructor):t.apply(e,a))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(C=function(){return!!e})()}t.C4gStarboardLayerElement=function(e){function t(e){var a;(0,l.default)(this,t);a=v(this,t,[e]);return a.layerClick=a.layerClick.bind(a),a.layerZoomTo=a.layerZoomTo.bind(a),a.spanClick=a.spanClick.bind(a),a.changeCollapseState=a.changeCollapseState.bind(a),a.parentCallback=a.parentCallback.bind(a),a}return(0,p.default)(t,e),(0,o.default)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.layerStates!==e.layerStates||(this.props.strFilter!==e.strFilter||(this.props.byPassChilds!==e.byPassChilds||this.props.layer!==e.layer))}},{key:"showLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,a=!1,r=!1;e?Array.isArray(e)?a=e:e instanceof f.Vector&&(r=e):(a=a||t.props.layer.features,r=r||t.props.layer.vectorLayer),a=a||t.props.layer.features;var s=t.props.mapController.proxy.layerController;a&&a.length>0?s.show(t.props.layer.loader,a,t.props.id,t.props.layerKey?t.props.layerKey:t.props.id):r?s.show(t.props.layer.loader,r,t.props.id,t.props.layerKey?t.props.layerKey:t.props.id):e?s.show(t.props.layer.loader,e,e.id,e.key?e.key:e.id):s.show(!1,!1,t.props.id,t.props.layerKey?t.props.layerKey:t.props.id)}},{key:"hideLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,a=!1,r=!1;e?Array.isArray(e)?a=e:e instanceof f.Vector&&(r=e):(a=a||t.props.layer.features,r=r||t.props.layer.vectorLayer);var s=t.props.mapController.proxy.layerController;a&&a.length>0?s.hide(t.props.layer.loader,a,t.props.id,t.props.layerKey?t.props.layerKey:t.props.id):r?s.hide(t.props.layer.loader,r,t.props.id,t.props.layerKey?t.props.layerKey:t.props.id):e?s.hide(t.props.layer.loader,e,e.id,e.key?e.key:e.id):s.hide(!1,!1,t.props.id,t.props.layerKey?t.props.layerKey:t.props.id)}},{key:"changeChildState",value:function(e,t,a){if(a?this.showLayer(e.features||e.vectorLayer):this.hideLayer(e.features||e.vectorLayer),e.childs&&e.childs.length>0)for(var r in e.childs)e.childs.hasOwnProperty(r)&&(t.childStates[r]=this.changeChildState(e.childs[r],t.childStates[r],a));return t.active=a,t}},{key:"parentCallback",value:function(e,t){var a=(0,m.default)(this.props.layerStates);a.childStates[e]=t,a.active!==t.active&&(t.active?this.showLayer():this.hideLayer(),a.active=t.active),this.props.parentCallback(this.props.keyId,a)}},{key:"layerEnter",value:function(e){13===e.which&&this.layerClick(e)}},{key:"layerClick",value:function(e){if(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.props.layerStates.greyed)return!1;var t=!1,a=(0,m.default)(this.props.layerStates);if(this.props.layerStates.active?(this.hideLayer(),a.active=!1):(this.showLayer(),t=!0,this.props.layerStates.collapsed&&(a.collapsed=!1),a.active=!0),this.props.layer.childs&&this.props.layer.childs.length>0&&!this.props.layer.ignoreChilds){var r=this.props.layer.childs;for(var s in r)r.hasOwnProperty(s)&&(r[s].key&&r[s].key!==r[s].id&&(t?this.showLayer(r[s]):this.hideLayer(r[s])),a.childStates[s]=this.changeChildState(r[s],a.childStates[s],a.active))}this.props.parentCallback(this.props.keyId,a)}},{key:"layerZoomTo",value:function(e){var t,a,r=this;(this.props.layerStates.active||this.layerClick(e),this.props.mapController.proxy.layerController.zoomTo(this.props.layer)&&(this.props.mapController.proxy.layerController.setChildFeatureFlag(this.props.layer,"markLocstyle",!0),window.setTimeout(function(){r.props.mapController.proxy.layerController.setChildFeatureFlag(r.props.layer,"markLocstyle",!1)},3e3)),this.props.mapController.proxy.mapData.starboard.openPopup)&&(this.props.layer.popup?(t=new y.default,a=new f.Vector,t.set("popup",this.props.layer.popup)):this.props.layer.features&&1===this.props.layer.features.length&&(a=new f.Vector,t=this.props.layer.features[0]),this.props.mapController.proxy.handlePopup(t,a))}},{key:"layerZoomToEnter",value:function(e){13===e.which&&this.layerZoomTo(e)}},{key:"changeCollapseState",value:function(e,t){var a=(0,m.default)(this.props.layerStates);a.childStates[e]=t,this.props.changeCollapseState(this.props.keyId,a)}},{key:"spanClick",value:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var t=(0,m.default)(this.props.layerStates);t.collapsed=!this.props.layerStates.collapsed,this.props.changeCollapseState(this.props.keyId,t)}},{key:"render",value:function(){var e=this,a=null,r=null;"1"===this.props.mapController.data.starboard.showLocstyles&&this.props.layer.locstyle&&this.props.styleData&&this.props.styleData.arrLocStyles&&this.props.styleData.arrLocStyles[this.props.layer.locstyle]?a=this.props.layer.zoomTo?u.default.createElement(h.C4gStarboardStyle,{styleData:this.props.styleData,styleId:this.props.layer.locstyle,tooltip:this.props.lang.STARBOARD_ELEMENT_ZOOM_BEFORE+this.props.layer.name+this.props.lang.STARBOARD_ELEMENT_ZOOM_AFTER,clickEvent:this.layerZoomTo}):u.default.createElement(h.C4gStarboardStyle,{styleData:this.props.styleData,styleId:this.props.layer.locstyle,tooltip:this.props.layer.name}):this.props.layer.zoomTo&&!this.props.mapController.data.starboard.invertZoomActivate&&(r=u.default.createElement("span",{className:"c4g-geojson-button",title:this.props.lang.STARBOARD_ELEMENT_ZOOM_BEFORE+this.props.layer.name+this.props.lang.STARBOARD_ELEMENT_ZOOM_AFTER,onMouseUp:function(t){return e.layerZoomTo(t)}}));var s=this.props.layerStates.active?d.cssConstants.ACTIVE:d.cssConstants.INACTIVE;this.props.layerStates.greyed&&(s+=" "+d.cssConstants.DISABLED);var l,o,i=this.props.layerStates.collapsed?d.cssConstants.CLOSE:d.cssConstants.OPEN,c=this.props.layer.childs;this.props.mapController.data.starboard.invertZoomActivate&&this.props.layer.zoomTo?(l=u.default.createElement(u.default.Fragment,null,u.default.createElement("a",(0,n.default)({tabIndex:1,title:this.props.layer.name,alt:this.props.lang.STARBOARD_ELEMENT_TRIGGER_1+this.props.layer.name+this.props.lang.STARBOARD_ELEMENT_TRIGGER_2,className:"c4g-starboard-text",onKeyPress:function(t){return e.layerEnter(t)},onMouseUp:function(t){return e.layerZoomTo(t)}},"onKeyPress",function(t){return e.layerZoomToEnter(t)}),u.default.createElement("span",{className:"c4g-starboard-list-element__text"},this.props.layer.name))),o=u.default.createElement("a",{className:s+" c4g-starboard-checkbox-icon",onMouseUp:function(t){return e.layerClick(t)}})):l=u.default.createElement("a",{tabIndex:1,title:this.props.layer.name,alt:this.props.lang.STARBOARD_ELEMENT_TRIGGER_1+this.props.layer.name+this.props.lang.STARBOARD_ELEMENT_TRIGGER_2,className:s,onKeyPress:function(t){return e.layerEnter(t)},onMouseUp:function(t){return e.layerClick(t)}},u.default.createElement("span",{className:"c4g-starboard-list-element__text"},this.props.layer.name));var p="";if(this.props.layer.cssClass&&(p=" "+this.props.layer.cssClass),c&&c.length){var f=u.default.createElement("span",{alt:this.props.lang.STARBOARD_ELEMENT_CHILDS,className:d.cssConstants.ICON,onMouseUp:function(t){return e.spanClick(t)}});return u.default.createElement("li",{"data-layer-id":this.props.id,className:i+" c4g-starboard-list-element"+p},f,a,r,l,o,u.default.createElement("ul",null,c.map(function(a,r){if(e.props.byPassChilds||e.props.filterFunc(e.props.strFilter,a,e.props.layerStates.childStates[r]))return u.default.createElement(t,{key:r,keyId:r,id:a.id,layerKey:a.key,mapController:e.props.mapController,parentCallback:e.parentCallback,strFilter:e.props.strFilter,filterFunc:e.props.filterFunc,changeCollapseState:e.changeCollapseState,lang:e.props.lang,byPassChilds:e.props.byPassChilds||e.props.filterFunc(e.props.strFilter,a,!1,!1),layerStates:e.props.layerStates.childStates[r],layer:a,styleData:e.props.styleData,fnResize:e.props.fnResize})})))}this.layerClick;return this.props.layer.zoomTo&&(this.layerZoomTo,s="c4g-geojson-button",o=null),u.default.createElement("li",{"data-layer-id":this.props.id,tabIndex:1,className:i+" c4g-starboard-list-element"+p},a,r,l,o)}}])}(u.Component)},45451(e,t,a){var r=a(29138),s=a(35578);Object.defineProperty(t,"__esModule",{value:!0}),t.C4gStarboardStyle=void 0;var n=r(a(1367)),l=r(a(60163)),o=r(a(55956)),i=r(a(20880)),c=r(a(39959)),p=function(e,t){if("function"==typeof WeakMap)var a=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,o={__proto__:null,default:e};if(null===e||"object"!=s(e)&&"function"!=typeof e)return o;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,o)}for(var i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((l=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,i))&&(l.get||l.set)?n(o,i,l):o[i]=e[i]);return o}(e,t)}(a(42028)),u=r(a(25089)),d=a(8007),h=a(75508),f=a(46363);function y(e,t,a){return t=(0,i.default)(t),(0,o.default)(e,m()?Reflect.construct(t,a||[],(0,i.default)(e).constructor):t.apply(e,a))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}t.C4gStarboardStyle=function(e){function t(e){return(0,n.default)(this,t),y(this,t,[e])}return(0,c.default)(t,e),(0,l.default)(t,[{key:"enterEvent",value:function(e){13===e.which&&this.props.clickEvent(e)}},{key:"render",value:function(){var e=this,t=null,a=this.props.styleData.arrLocStyles[this.props.styleId],r=a.locStyleArr,s=a.style&&a.style(new u.default({geometry:new d.Point(0,0)}),"EPSG:4326")?a.style(new u.default({geometry:new d.Point(0,0)}),"EPSG:4326"):null,n=Array.isArray(s)?s[0]:s,l=r?r.styletype:"default",o=this.props.tooltip||"";if(!r||"cust_icon"!==l&&"cust_icon_svg"!==l&&"photo"!==l){var i,c,y;switch(l){case"point":i=h.cssConstants.STARBOARD_LOCSTYLE_POINT;break;case"square":i=h.cssConstants.STARBOARD_LOCSTYLE_SQUARE;break;case"star":i=h.cssConstants.STARBOARD_LOCSTYLE_STAR;break;case"x":i=h.cssConstants.STARBOARD_LOCSTYLE_X;break;case"cross":i=h.cssConstants.STARBOARD_LOCSTYLE_CROSS;break;case"triangle":i=h.cssConstants.STARBOARD_LOCSTYLE_TRIANGLE;break;default:i=h.cssConstants.STARBOARD_LOCSTYLE}n&&n.getFill()&&n.getStroke()?(c=n.getFill().getColor(),y=n.getStroke().getColor()):r&&r.fillcolor&&r.strokecolor&&(c=f.utils.getRgbaFromHexAndOpacity(r.fillcolor[0],r.fillcolor[1]),y=f.utils.getRgbaFromHexAndOpacity(r.strokecolor[0],r.strokecolor[1]));var m={"--var-color":c,"--var-bordercolor":y};t=this.props.clickEvent?p.default.createElement("span",{className:i,style:m,title:o,onMouseUp:function(t){return e.props.clickEvent(t)}}):p.default.createElement("span",{className:i,style:m,title:o})}else{var g,v=null;if(r.icon_src&&-1!==r.icon_src.indexOf(".")||r.svgSrc&&-1!==r.svgSrc.indexOf("."))g="cust_icon"===l||"photo"===l?r.icon_src:r.svgSrc,v=p.default.createElement("img",{src:g,style:{height:25,width:25}});else if(n){var C=n.getImage&&"function"==typeof n.getImage&&n.getImage()?n.getImage():null;if(!C||!C.getSrc())return null;v=p.default.createElement("img",{src:C.getSrc(),style:{height:25,width:25}})}t=this.props.clickEvent?p.default.createElement("span",{tabIndex:1,className:h.cssConstants.STARBOARD_LOCSTYLE,title:o,onKeyPress:function(t){return e.enterEvent(t)},onMouseUp:function(t){return e.props.clickEvent(t)}},v):p.default.createElement("span",{className:h.cssConstants.STARBOARD_LOCSTYLE,title:o},v)}return t}}])}(p.Component)},46477(e,t,a){const{VOID:r,PRIMITIVE:s,ARRAY:n,OBJECT:l,DATE:o,REGEXP:i,MAP:c,SET:p,ERROR:u,BIGINT:d}=a(30307),h="object"==typeof self?self:globalThis;t.deserialize=e=>((e,t)=>{const a=(t,a)=>(e.set(a,t),t),f=y=>{if(e.has(y))return e.get(y);const[m,g]=t[y];switch(m){case s:case r:return a(g,y);case n:{const e=a([],y);for(const t of g)e.push(f(t));return e}case l:{const e=a({},y);for(const[t,a]of g)e[f(t)]=f(a);return e}case o:return a(new Date(g),y);case i:{const{source:e,flags:t}=g;return a(new RegExp(e,t),y)}case c:{const e=a(new Map,y);for(const[t,a]of g)e.set(f(t),f(a));return e}case p:{const e=a(new Set,y);for(const t of g)e.add(f(t));return e}case u:{const{name:e,message:t}=g;return a(new h[e](t),y)}case d:return a(BigInt(g),y);case"BigInt":return a(Object(BigInt(g)),y);case"ArrayBuffer":return a(new Uint8Array(g).buffer,g);case"DataView":{const{buffer:e}=new Uint8Array(g);return a(new DataView(e),g)}}return a(new h[m](g),y)};return f})(new Map,e)(0)},60718(e,t,a){const{deserialize:r}=a(46477),{serialize:s}=a(84795);Object.defineProperty(t,"__esModule",{value:!0}).default="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?r(s(e,t)):structuredClone(e):(e,t)=>r(s(e,t)),t.deserialize=r,t.serialize=s},79230(e,t,a){var r=a(29138),s=a(35578);Object.defineProperty(t,"__esModule",{value:!0}),t.StarboardLayerswitcher=void 0;var n=r(a(1367)),l=r(a(60163)),o=r(a(55956)),i=r(a(20880)),c=r(a(39959)),p=r(a(74141)),u=function(e,t){if("function"==typeof WeakMap)var a=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,o={__proto__:null,default:e};if(null===e||"object"!=s(e)&&"function"!=typeof e)return o;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,o)}for(var i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((l=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,i))&&(l.get||l.set)?n(o,i,l):o[i]=e[i]);return o}(e,t)}(a(42028)),d=a(75508),h=a(37608),f=r(a(60718));function y(e,t,a){return t=(0,i.default)(t),(0,o.default)(e,m()?Reflect.construct(t,a||[],(0,i.default)(e).constructor):t.apply(e,a))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}t.StarboardLayerswitcher=function(e){function t(e){var a;(0,n.default)(this,t),a=y(this,t,[e]),(0,p.default)(a,"getInitialStates",function(){for(var e in a.initialCounterOff=0,a.initialCounterOn=0,a.props.layerStates)if(a.props.layerStates.hasOwnProperty(e)&&(a.props.layerStates[e].active?a.initialCounterOn++:a.initialCounterOff++,a.props.layerStates[e].childStates))for(var t in a.props.layerStates[e].childStates)a.props.layerStates[e].childStates.hasOwnProperty(t)&&a.getInitialStateChild(a.props.layerStates[e].childStates[t]);return a.initialCounterOn>a.initialCounterOff}),(0,p.default)(a,"callbackFunction",function(e,t){var r=(0,f.default)(a.props.layerStates);r[e]=t,a.props.parentCallback(r)});var r=e.mapController.arrComponents.findIndex(function(e){return"layerswitcher"===e.name});return e.mapController.arrComponents[r].component=a,a.setLayerFilter=a.setLayerFilter.bind(a),a.toggleAllLayers=a.toggleAllLayers.bind(a),a.toggleSpecificLayers=a.toggleSpecificLayers.bind(a),a.changeCollapseState=a.changeCollapseState.bind(a),a.states={},a.state={initialized:!1,layerFilter:""},a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"getInitialStateChild",value:function(e){if(e.active?this.initialCounterOn++:this.initialCounterOff++,e.childStates)for(var t in e.childStates)e.childStates.hasOwnProperty(t)&&this.getInitialStateChild(e.childStates[t])}},{key:"setLayerFilter",value:function(){var e=jQuery(".c4g-starboard-layertree-filter-field").val()||"";this.setState({layerFilter:e})}},{key:"filterFunc",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!1;if(t&&t.name&&(-1!==t.name.toLowerCase().indexOf(e.toLowerCase())||-1!==t.name.toUpperCase().indexOf(e.toUpperCase())))s=!0;else if(t.tags&&t.tags.find&&t.tags.find(function(t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())}))s=!0;else if(r)for(var n in t.childs)t.childs.hasOwnProperty(n)&&!s&&(s=this.filterFunc(e,t.childs[n],a.childStates?a.childStates[n]:{}));return s}},{key:"applyOldState",value:function(e){var t=this,a=this.props.objLayers,r=this.props.layerStates,s=this.states[e];!function e(a,r,s){for(var n=0;n<r.length;n++)r[n].active!==s[n].active&&(s[n].active?t.props.mapController.proxy.layerController.show(a[n].loader,a[n].features||a[n].vectorLayer):t.props.mapController.proxy.layerController.hide(a[n].loader,a[n].features||a[n].vectorLayer)),r[n].childStates&&r[n].childStates.length>0&&e(a[n].childs,r[n].childStates,s[n].childStates)}(a,r,s),this.props.parentCallback(s)}},{key:"toggleSpecificLayers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,r=this.props.objLayers,s=this.props.layerStates;t&&(this.states[t]=(0,f.default)(s)),s=function t(r,s){for(var n=0;n<s.length;n++)e.includes(r[n].id)?(s[n].active||a.props.mapController.proxy.layerController.show(r[n].loader,r[n].features||r[n].vectorLayer),s[n].active=!0):(s[n].active&&a.props.mapController.proxy.layerController.hide(r[n].loader,r[n].features||r[n].vectorLayer),s[n].active=!1),s[n].childStates&&s[n].childStates.length>0&&(s[n].childStates=t(r[n].childs,s[n].childStates));return s}(r,s),this.props.parentCallback(s)}},{key:"toggleAllLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;this.chunkTimer&&(cancelAnimationFrame(this.chunkTimer),this.chunkTimer=null);var a=(0,f.default)(this.props.layerStates),r=this.props.objLayers;if(e&&(this.states[e]=(0,f.default)(a)),t.buttonEnabled){var s=function(e,t){for(var a=0;a<t.length;a++)n.push({loader:e[a].loader,data:e[a].features||e[a].vectorLayer,show:!1}),t[a].childStates&&t[a].childStates.length>0&&e[a]&&e[a].childs&&s(e[a].childs,t[a].childStates)};t.props.mapController.map.getView().dispatchEvent({type:"change:resolution"}),a=function e(a,r){for(var s=0;s<r.length;s++)r[s].active=!1,r[s].childStates&&r[s].childStates.length>0&&a[s]&&a[s].childs&&(r[s].childStates=e(a[s].childs,r[s].childStates));return t.buttonEnabled=!1,r}(r,a),this.props.parentCallback(a);var n=[];s(r,a);var l=0,o=function(){for(var e=Math.min(l+25,n.length),a=l;a<e;a++){var r=n[a];(r.loader||r.data)&&t.props.mapController.proxy.layerController.hide(r.loader,r.data)}(l=e)<n.length?t.chunkTimer=requestAnimationFrame(o):t.chunkTimer=null};t.chunkTimer=requestAnimationFrame(o)}else{var i=function(e,t){for(var a=0;a<t.length;a++)c.push({loader:e[a].loader,data:e[a].features||e[a].vectorLayer,show:!0}),t[a].childStates&&t[a].childStates.length>0&&e[a]&&e[a].childs&&i(e[a].childs,t[a].childStates)};a=function e(a,r){for(var s=0;s<r.length;s++)r[s].active=!0,r[s].childStates&&r[s].childStates.length>0&&a[s]&&a[s].childs&&(r[s].childStates=e(a[s].childs,r[s].childStates));return t.buttonEnabled=!0,r}(r,a);var c=[];i(r,a);var p=0,u=function(){for(var e=Math.min(p+25,c.length),a=p;a<e;a++){var r=c[a];(r.loader||r.data)&&t.props.mapController.proxy.layerController.show(r.loader,r.data)}(p=e)<c.length?t.chunkTimer=requestAnimationFrame(u):t.chunkTimer=null};this.props.parentCallback(a),t.chunkTimer=requestAnimationFrame(u)}}},{key:"changeCollapseState",value:function(e,t){(0,f.default)(this.props.layerStates)[e]=t,this.props.changeCollapseState(e,t)}},{key:"render",value:function(){var e,t,a,r=this;if(!(this.props.layerStates&&this.props.layerStates.length>0)||this.initialCounterOff&&this.initialCounterOn||(this.states.initial=(0,f.default)(this.props.layerStates),this.buttonEnabled=this.getInitialStates()),e=this.props.objLayers,t=this.props.layerStates,!this.props.active)return null;if(a="",this.props.mapController.data.layerswitcher.filter){var s=this.props.mapController.data.layerswitcher.filter_placeholder||"ï€‚";a=u.default.createElement("div",{className:"c4g-starboard-layertree-filter without-button"},u.default.createElement("input",{className:"c4g-starboard-layertree-filter-field",type:"text",onInput:this.setLayerFilter,placeholder:s}))}var n="";return n=this.props.mapController.data.starboard.button?u.default.createElement("a",{className:"c4g-starboard-headline-link "+(this.buttonEnabled?"c4g-active":"c4g-inactive"),onMouseUp:this.toggleAllLayers},this.props.headline||this.props.lang.LAYERSWITCHER_TOGGLE_ALL):u.default.createElement("div",{className:"contentHeadline"},this.props.headline),u.default.createElement(u.default.Fragment,null,n,a,u.default.createElement("div",{className:"c4g-content-layertree"},u.default.createElement("div",{className:d.cssConstants.STARBOARD_LAYERTREE},u.default.createElement("ul",null,e.map(function(e,a){if(r.filterFunc(r.state.layerFilter,e,t[a]))return u.default.createElement(h.C4gStarboardLayerElement,{key:a,keyId:a,id:e.id,mapController:r.props.mapController,parentCallback:r.callbackFunction,layer:e,styleData:r.props.styleData,changeCollapseState:r.changeCollapseState,layerStates:t[a],lang:r.props.lang,byPassChilds:r.filterFunc(r.state.layerFilter,e,!1,!1),strFilter:r.state.layerFilter,filterFunc:r.filterFunc,fnResize:r.props.fnResize})})))))}}])}(u.Component)},84795(e,t,a){const{VOID:r,PRIMITIVE:s,ARRAY:n,OBJECT:l,DATE:o,REGEXP:i,MAP:c,SET:p,ERROR:u,BIGINT:d}=a(30307),h="",{toString:f}={},{keys:y}=Object,m=e=>{const t=typeof e;if("object"!==t||!e)return[s,t];const a=f.call(e).slice(8,-1);switch(a){case"Array":return[n,h];case"Object":return[l,h];case"Date":return[o,h];case"RegExp":return[i,h];case"Map":return[c,h];case"Set":return[p,h];case"DataView":return[n,a]}return a.includes("Array")?[n,a]:a.includes("Error")?[u,a]:[l,a]},g=([e,t])=>e===s&&("function"===t||"symbol"===t);t.serialize=(e,{json:t,lossy:a}={})=>{const u=[];return((e,t,a,u)=>{const h=(e,t)=>{const r=u.push(e)-1;return a.set(t,r),r},f=u=>{if(a.has(u))return a.get(u);let[v,C]=m(u);switch(v){case s:{let t=u;switch(C){case"bigint":v=d,t=u.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+C);t=null;break;case"undefined":return h([r],u)}return h([v,t],u)}case n:{if(C){let e=u;return"DataView"===C?e=new Uint8Array(u.buffer):"ArrayBuffer"===C&&(e=new Uint8Array(u)),h([C,[...e]],u)}const e=[],t=h([v,e],u);for(const t of u)e.push(f(t));return t}case l:{if(C)switch(C){case"BigInt":return h([C,u.toString()],u);case"Boolean":case"Number":case"String":return h([C,u.valueOf()],u)}if(t&&"toJSON"in u)return f(u.toJSON());const a=[],r=h([v,a],u);for(const t of y(u))!e&&g(m(u[t]))||a.push([f(t),f(u[t])]);return r}case o:return h([v,u.toISOString()],u);case i:{const{source:e,flags:t}=u;return h([v,{source:e,flags:t}],u)}case c:{const t=[],a=h([v,t],u);for(const[a,r]of u)(e||!g(m(a))&&!g(m(r)))&&t.push([f(a),f(r)]);return a}case p:{const t=[],a=h([v,t],u);for(const a of u)!e&&g(m(a))||t.push(f(a));return a}}const{message:S}=u;return h([v,{name:C,message:S}],u)};return f})(!(t||a),!!t,new Map,u)(e),u}}}]);